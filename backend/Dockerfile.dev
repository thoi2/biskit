# backend/Dockerfile.dev
# Spring Boot 개발 환경을 위한 Dockerfile

# 1. Gradle과 JDK 21이 모두 포함된 이미지를 기반으로 시작합니다.
FROM gradle:8.5-jdk21

# 2. 작업 디렉토리를 /app으로 설정합니다.
WORKDIR /app

# 3. Gradle Wrapper 파일을 먼저 복사합니다.
#    (실제 의존성 설치와 빌드는 docker-compose의 볼륨 마운트를 통해 실행됩니다)
COPY gradle/ gradle/
COPY gradlew build.gradle.kts settings.gradle.kts ./

# 4. Spring Boot 애플리케이션의 기본 포트인 8080을 노출합니다.
EXPOSE 8080

# 5. 컨테이너가 시작될 때 Gradle을 사용해 애플리케이션을 실행합니다.
#    'bootRun'은 소스 코드 변경을 감지하고 자동으로 재시작(Hot Reloading)해줍니다.
CMD ["./gradlew", "bootRun"]
